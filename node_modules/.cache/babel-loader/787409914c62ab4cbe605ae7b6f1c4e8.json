{"ast":null,"code":"var _excluded = [\"children\", \"id\", \"level\", \"open\", \"size\", \"x\", \"y\", \"onClose\"];\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { settings } from 'carbon-components';\nimport { keys, match } from '../../internal/keyboard';\nimport { capWithinRange, clickedElementHasSubnodes, focusNode as focusNodeUtil, getNextNode, getParentMenu, getParentNode, getPosition, getValidNodes, resetFocus } from './_utils';\nimport MenuGroup from './MenuGroup';\nimport MenuRadioGroup from './MenuRadioGroup';\nimport MenuRadioGroupOptions from './MenuRadioGroupOptions';\nimport MenuSelectableItem from './MenuSelectableItem';\nvar prefix = settings.prefix;\nvar margin = 16; // distance to keep to body edges, in px\n\nvar defaultSize = 'sm';\n\nvar Menu = function Menu(_ref) {\n  var _classnames;\n\n  var children = _ref.children,\n      id = _ref.id,\n      _ref$level = _ref.level,\n      level = _ref$level === void 0 ? 1 : _ref$level,\n      open = _ref.open,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var rootRef = useRef(null);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      direction = _useState2[0],\n      setDirection = _useState2[1]; // 1 = to right, -1 = to left\n\n\n  var _useState3 = useState([x, y]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var isRootMenu = level === 1;\n  var focusReturn = useRef(null);\n\n  function returnFocus() {\n    if (focusReturn.current) {\n      focusReturn.current.focus();\n    }\n  }\n\n  function close(eventType) {\n    var isKeyboardEvent = /^key/.test(eventType);\n\n    if (isKeyboardEvent) {\n      window.addEventListener('keyup', returnFocus, {\n        once: true\n      });\n    } else {\n      window.addEventListener('mouseup', returnFocus, {\n        once: true\n      });\n    }\n\n    onClose();\n  }\n\n  function getContainerBoundaries() {\n    var _document$body = document.body,\n        bodyWidth = _document$body.clientWidth,\n        bodyHeight = _document$body.clientHeight;\n    return [margin, margin, bodyWidth - margin, bodyHeight - margin];\n  }\n\n  function getTargetBoundaries() {\n    var xIsRange = _typeof(x) === 'object' && x.length === 2;\n    var yIsRange = _typeof(y) === 'object' && y.length === 2;\n    var targetBoundaries = [xIsRange ? x[0] : x, yIsRange ? y[0] : y, xIsRange ? x[1] : x, yIsRange ? y[1] : y];\n\n    if (!isRootMenu) {\n      var _getParentMenu;\n\n      var _getParentMenu$getBou = (_getParentMenu = getParentMenu(rootRef.current)) === null || _getParentMenu === void 0 ? void 0 : _getParentMenu.getBoundingClientRect(),\n          parentWidth = _getParentMenu$getBou.width;\n\n      targetBoundaries[2] -= parentWidth;\n    }\n\n    var containerBoundaries = getContainerBoundaries();\n    return [capWithinRange(targetBoundaries[0], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[1], containerBoundaries[1], containerBoundaries[3]), capWithinRange(targetBoundaries[2], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[3], containerBoundaries[1], containerBoundaries[3])];\n  }\n\n  function focusNode(node) {\n    if (node) {\n      resetFocus(rootRef.current);\n      focusNodeUtil(node);\n    }\n  }\n\n  function handleKeyDown(event) {\n    if (match(event, keys.Tab)) {\n      event.preventDefault();\n      close(event.type);\n    }\n\n    if (event.target.tagName === 'LI' && (match(event, keys.Enter) || match(event, keys.Space))) {\n      handleClick(event);\n    } else {\n      event.stopPropagation();\n    }\n\n    if (match(event, keys.Escape) || !isRootMenu && match(event, keys.ArrowLeft)) {\n      close(event.type);\n    }\n\n    var nodeToFocus;\n\n    if (event.target.tagName === 'LI') {\n      var currentNode = event.target;\n\n      if (match(event, keys.ArrowUp)) {\n        nodeToFocus = getNextNode(currentNode, -1);\n      } else if (match(event, keys.ArrowDown)) {\n        nodeToFocus = getNextNode(currentNode, 1);\n      } else if (match(event, keys.ArrowLeft)) {\n        nodeToFocus = getParentNode(currentNode);\n      }\n    } else if (event.target.tagName === 'UL') {\n      var validNodes = getValidNodes(event.target);\n\n      if (validNodes.length > 0 && match(event, keys.ArrowUp)) {\n        nodeToFocus = validNodes[validNodes.length - 1];\n      } else if (validNodes.length > 0 && match(event, keys.ArrowDown)) {\n        nodeToFocus = validNodes[0];\n      }\n    }\n\n    focusNode(nodeToFocus);\n\n    if (rest.onKeyDown) {\n      rest.onKeyDown(event);\n    }\n  }\n\n  function handleClick(event) {\n    if (!clickedElementHasSubnodes(event) && event.target.tagName !== 'UL') {\n      close(event.type);\n    } else {\n      event.stopPropagation();\n    }\n  }\n\n  function getCorrectedPosition(preferredDirection) {\n    var _rootRef$current;\n\n    var elementRect = (_rootRef$current = rootRef.current) === null || _rootRef$current === void 0 ? void 0 : _rootRef$current.getBoundingClientRect();\n    var elementDimensions = [elementRect.width, elementRect.height];\n    var targetBoundaries = getTargetBoundaries();\n    var containerBoundaries = getContainerBoundaries();\n\n    var _getPosition = getPosition(elementDimensions, targetBoundaries, containerBoundaries, preferredDirection),\n        correctedPosition = _getPosition.position,\n        correctedDirection = _getPosition.direction;\n\n    setDirection(correctedDirection);\n    return correctedPosition;\n  }\n\n  function handleBlur(event) {\n    var _rootRef$current2;\n\n    if (isRootMenu && !((_rootRef$current2 = rootRef.current) !== null && _rootRef$current2 !== void 0 && _rootRef$current2.contains(event.relatedTarget))) {\n      close(event.type);\n    }\n  }\n\n  useEffect(function () {\n    if (open) {\n      focusReturn.current = document.activeElement;\n      var localDirection = 1;\n\n      if (isRootMenu) {\n        var _rootRef$current3;\n\n        (_rootRef$current3 = rootRef.current) === null || _rootRef$current3 === void 0 ? void 0 : _rootRef$current3.focus();\n      } else {\n        var parentMenu = getParentMenu(rootRef.current);\n\n        if (parentMenu) {\n          localDirection = Number(parentMenu.dataset.direction);\n        }\n      }\n\n      var correctedPosition = getCorrectedPosition(localDirection);\n      setPosition(correctedPosition);\n    } else {\n      setPosition([0, 0]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [open, x, y]);\n  var someNodesHaveIcons = React.Children.toArray(children).some(function (node) {\n    return node.type === MenuSelectableItem || node.type === MenuRadioGroup;\n  });\n  var options = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node, {\n        indented: someNodesHaveIcons,\n        level: level\n      });\n    }\n  });\n  var classes = classnames(\"\".concat(prefix, \"--menu\"), (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefix, \"--menu--open\"), open), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--invisible\"), open && position[0] === 0 && position[1] === 0), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--root\"), isRootMenu), _classnames), size !== defaultSize && \"\".concat(prefix, \"--menu--\").concat(size));\n  var ulAttributes = {\n    id: id,\n    ref: rootRef,\n    className: classes,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick,\n    onBlur: handleBlur,\n    role: 'menu',\n    tabIndex: -1,\n    'data-direction': direction,\n    'data-level': level,\n    style: {\n      left: \"\".concat(position[0], \"px\"),\n      top: \"\".concat(position[1], \"px\")\n    }\n  };\n  var childrenToRender = options; // if the only child is a radiogroup, don't render it as radiogroup component, but\n  // only the items to prevent duplicate markup\n\n  if (options && options.length === 1 && options[0].type === MenuRadioGroup) {\n    var radioGroupProps = options[0].props;\n    ulAttributes['aria-label'] = radioGroupProps.label;\n    childrenToRender = /*#__PURE__*/React.createElement(MenuRadioGroupOptions, {\n      items: radioGroupProps.items,\n      initialSelectedItem: radioGroupProps.initialSelectedItem,\n      onChange: radioGroupProps.onChange\n    });\n  } // if the only child is a generic group, don't render it as group component, but\n  // only the children to prevent duplicate markup\n\n\n  if (options && options.length === 1 && options[0].type === MenuGroup) {\n    var groupProps = options[0].props;\n    ulAttributes['aria-label'] = groupProps.label;\n    childrenToRender = React.Children.toArray(options[0].props.children);\n  }\n\n  var menu = /*#__PURE__*/React.createElement(\"ul\", ulAttributes, childrenToRender);\n  return isRootMenu ? open && /*#__PURE__*/ReactDOM.createPortal(menu, document.body) || null : menu;\n};\n\nMenu.propTypes = {\n  /**\n   * Specify the children of the Menu\n   */\n  children: PropTypes.node,\n\n  /**\n   * Define an ID for this menu\n   */\n  id: PropTypes.string,\n\n  /**\n   * Internal: keeps track of the nesting level of the menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * Function called when the menu is closed\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify whether the Menu is currently open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Specify the size of the menu, from a list of available sizes.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n\n  /**\n   * Specify the x position where this menu is rendered\n   */\n  x: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\n\n  /**\n   * Specify the y position where this menu is rendered\n   */\n  y: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)])\n};\nexport default Menu;","map":{"version":3,"sources":["/home/walter/Desktop/AmpathDemo/ampath-employee-management/front-end/node_modules/carbon-components-react/es/components/Menu/Menu.js"],"names":["_excluded","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","call","slice","name","Array","from","test","len","length","arr2","_i","_arr","_n","_d","_s","_e","next","done","push","err","isArray","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","React","useEffect","useRef","useState","ReactDOM","classnames","PropTypes","settings","match","capWithinRange","clickedElementHasSubnodes","focusNode","focusNodeUtil","getNextNode","getParentMenu","getParentNode","getPosition","getValidNodes","resetFocus","MenuGroup","MenuRadioGroup","MenuRadioGroupOptions","MenuSelectableItem","prefix","margin","defaultSize","Menu","_ref","_classnames","children","id","_ref$level","level","open","_ref$size","size","_ref$x","x","_ref$y","y","_ref$onClose","onClose","rest","rootRef","_useState","_useState2","direction","setDirection","_useState3","_useState4","position","setPosition","isRootMenu","focusReturn","returnFocus","current","focus","close","eventType","isKeyboardEvent","window","addEventListener","once","getContainerBoundaries","_document$body","document","body","bodyWidth","clientWidth","bodyHeight","clientHeight","getTargetBoundaries","xIsRange","yIsRange","targetBoundaries","_getParentMenu","_getParentMenu$getBou","getBoundingClientRect","parentWidth","width","containerBoundaries","node","handleKeyDown","event","Tab","preventDefault","type","tagName","Enter","Space","handleClick","stopPropagation","Escape","ArrowLeft","nodeToFocus","currentNode","ArrowUp","ArrowDown","validNodes","onKeyDown","getCorrectedPosition","preferredDirection","_rootRef$current","elementRect","elementDimensions","height","_getPosition","correctedPosition","correctedDirection","handleBlur","_rootRef$current2","contains","relatedTarget","activeElement","localDirection","_rootRef$current3","parentMenu","Number","dataset","someNodesHaveIcons","Children","toArray","some","options","map","isValidElement","cloneElement","indented","classes","concat","ulAttributes","ref","className","onClick","onBlur","role","tabIndex","style","left","top","childrenToRender","radioGroupProps","props","label","createElement","items","initialSelectedItem","onChange","groupProps","menu","createPortal","propTypes","string","number","func","bool","oneOf","oneOfType","arrayOf"],"mappings":"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","sourcesContent":["var _excluded = [\"children\", \"id\", \"level\", \"open\", \"size\", \"x\", \"y\", \"onClose\"];\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { settings } from 'carbon-components';\nimport { keys, match } from '../../internal/keyboard';\nimport { capWithinRange, clickedElementHasSubnodes, focusNode as focusNodeUtil, getNextNode, getParentMenu, getParentNode, getPosition, getValidNodes, resetFocus } from './_utils';\nimport MenuGroup from './MenuGroup';\nimport MenuRadioGroup from './MenuRadioGroup';\nimport MenuRadioGroupOptions from './MenuRadioGroupOptions';\nimport MenuSelectableItem from './MenuSelectableItem';\nvar prefix = settings.prefix;\nvar margin = 16; // distance to keep to body edges, in px\n\nvar defaultSize = 'sm';\n\nvar Menu = function Menu(_ref) {\n  var _classnames;\n\n  var children = _ref.children,\n      id = _ref.id,\n      _ref$level = _ref.level,\n      level = _ref$level === void 0 ? 1 : _ref$level,\n      open = _ref.open,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var rootRef = useRef(null);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      direction = _useState2[0],\n      setDirection = _useState2[1]; // 1 = to right, -1 = to left\n\n\n  var _useState3 = useState([x, y]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var isRootMenu = level === 1;\n  var focusReturn = useRef(null);\n\n  function returnFocus() {\n    if (focusReturn.current) {\n      focusReturn.current.focus();\n    }\n  }\n\n  function close(eventType) {\n    var isKeyboardEvent = /^key/.test(eventType);\n\n    if (isKeyboardEvent) {\n      window.addEventListener('keyup', returnFocus, {\n        once: true\n      });\n    } else {\n      window.addEventListener('mouseup', returnFocus, {\n        once: true\n      });\n    }\n\n    onClose();\n  }\n\n  function getContainerBoundaries() {\n    var _document$body = document.body,\n        bodyWidth = _document$body.clientWidth,\n        bodyHeight = _document$body.clientHeight;\n    return [margin, margin, bodyWidth - margin, bodyHeight - margin];\n  }\n\n  function getTargetBoundaries() {\n    var xIsRange = _typeof(x) === 'object' && x.length === 2;\n    var yIsRange = _typeof(y) === 'object' && y.length === 2;\n    var targetBoundaries = [xIsRange ? x[0] : x, yIsRange ? y[0] : y, xIsRange ? x[1] : x, yIsRange ? y[1] : y];\n\n    if (!isRootMenu) {\n      var _getParentMenu;\n\n      var _getParentMenu$getBou = (_getParentMenu = getParentMenu(rootRef.current)) === null || _getParentMenu === void 0 ? void 0 : _getParentMenu.getBoundingClientRect(),\n          parentWidth = _getParentMenu$getBou.width;\n\n      targetBoundaries[2] -= parentWidth;\n    }\n\n    var containerBoundaries = getContainerBoundaries();\n    return [capWithinRange(targetBoundaries[0], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[1], containerBoundaries[1], containerBoundaries[3]), capWithinRange(targetBoundaries[2], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[3], containerBoundaries[1], containerBoundaries[3])];\n  }\n\n  function focusNode(node) {\n    if (node) {\n      resetFocus(rootRef.current);\n      focusNodeUtil(node);\n    }\n  }\n\n  function handleKeyDown(event) {\n    if (match(event, keys.Tab)) {\n      event.preventDefault();\n      close(event.type);\n    }\n\n    if (event.target.tagName === 'LI' && (match(event, keys.Enter) || match(event, keys.Space))) {\n      handleClick(event);\n    } else {\n      event.stopPropagation();\n    }\n\n    if (match(event, keys.Escape) || !isRootMenu && match(event, keys.ArrowLeft)) {\n      close(event.type);\n    }\n\n    var nodeToFocus;\n\n    if (event.target.tagName === 'LI') {\n      var currentNode = event.target;\n\n      if (match(event, keys.ArrowUp)) {\n        nodeToFocus = getNextNode(currentNode, -1);\n      } else if (match(event, keys.ArrowDown)) {\n        nodeToFocus = getNextNode(currentNode, 1);\n      } else if (match(event, keys.ArrowLeft)) {\n        nodeToFocus = getParentNode(currentNode);\n      }\n    } else if (event.target.tagName === 'UL') {\n      var validNodes = getValidNodes(event.target);\n\n      if (validNodes.length > 0 && match(event, keys.ArrowUp)) {\n        nodeToFocus = validNodes[validNodes.length - 1];\n      } else if (validNodes.length > 0 && match(event, keys.ArrowDown)) {\n        nodeToFocus = validNodes[0];\n      }\n    }\n\n    focusNode(nodeToFocus);\n\n    if (rest.onKeyDown) {\n      rest.onKeyDown(event);\n    }\n  }\n\n  function handleClick(event) {\n    if (!clickedElementHasSubnodes(event) && event.target.tagName !== 'UL') {\n      close(event.type);\n    } else {\n      event.stopPropagation();\n    }\n  }\n\n  function getCorrectedPosition(preferredDirection) {\n    var _rootRef$current;\n\n    var elementRect = (_rootRef$current = rootRef.current) === null || _rootRef$current === void 0 ? void 0 : _rootRef$current.getBoundingClientRect();\n    var elementDimensions = [elementRect.width, elementRect.height];\n    var targetBoundaries = getTargetBoundaries();\n    var containerBoundaries = getContainerBoundaries();\n\n    var _getPosition = getPosition(elementDimensions, targetBoundaries, containerBoundaries, preferredDirection),\n        correctedPosition = _getPosition.position,\n        correctedDirection = _getPosition.direction;\n\n    setDirection(correctedDirection);\n    return correctedPosition;\n  }\n\n  function handleBlur(event) {\n    var _rootRef$current2;\n\n    if (isRootMenu && !((_rootRef$current2 = rootRef.current) !== null && _rootRef$current2 !== void 0 && _rootRef$current2.contains(event.relatedTarget))) {\n      close(event.type);\n    }\n  }\n\n  useEffect(function () {\n    if (open) {\n      focusReturn.current = document.activeElement;\n      var localDirection = 1;\n\n      if (isRootMenu) {\n        var _rootRef$current3;\n\n        (_rootRef$current3 = rootRef.current) === null || _rootRef$current3 === void 0 ? void 0 : _rootRef$current3.focus();\n      } else {\n        var parentMenu = getParentMenu(rootRef.current);\n\n        if (parentMenu) {\n          localDirection = Number(parentMenu.dataset.direction);\n        }\n      }\n\n      var correctedPosition = getCorrectedPosition(localDirection);\n      setPosition(correctedPosition);\n    } else {\n      setPosition([0, 0]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [open, x, y]);\n  var someNodesHaveIcons = React.Children.toArray(children).some(function (node) {\n    return node.type === MenuSelectableItem || node.type === MenuRadioGroup;\n  });\n  var options = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node, {\n        indented: someNodesHaveIcons,\n        level: level\n      });\n    }\n  });\n  var classes = classnames(\"\".concat(prefix, \"--menu\"), (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefix, \"--menu--open\"), open), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--invisible\"), open && position[0] === 0 && position[1] === 0), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--root\"), isRootMenu), _classnames), size !== defaultSize && \"\".concat(prefix, \"--menu--\").concat(size));\n  var ulAttributes = {\n    id: id,\n    ref: rootRef,\n    className: classes,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick,\n    onBlur: handleBlur,\n    role: 'menu',\n    tabIndex: -1,\n    'data-direction': direction,\n    'data-level': level,\n    style: {\n      left: \"\".concat(position[0], \"px\"),\n      top: \"\".concat(position[1], \"px\")\n    }\n  };\n  var childrenToRender = options; // if the only child is a radiogroup, don't render it as radiogroup component, but\n  // only the items to prevent duplicate markup\n\n  if (options && options.length === 1 && options[0].type === MenuRadioGroup) {\n    var radioGroupProps = options[0].props;\n    ulAttributes['aria-label'] = radioGroupProps.label;\n    childrenToRender = /*#__PURE__*/React.createElement(MenuRadioGroupOptions, {\n      items: radioGroupProps.items,\n      initialSelectedItem: radioGroupProps.initialSelectedItem,\n      onChange: radioGroupProps.onChange\n    });\n  } // if the only child is a generic group, don't render it as group component, but\n  // only the children to prevent duplicate markup\n\n\n  if (options && options.length === 1 && options[0].type === MenuGroup) {\n    var groupProps = options[0].props;\n    ulAttributes['aria-label'] = groupProps.label;\n    childrenToRender = React.Children.toArray(options[0].props.children);\n  }\n\n  var menu = /*#__PURE__*/React.createElement(\"ul\", ulAttributes, childrenToRender);\n  return isRootMenu ? open && /*#__PURE__*/ReactDOM.createPortal(menu, document.body) || null : menu;\n};\n\nMenu.propTypes = {\n  /**\n   * Specify the children of the Menu\n   */\n  children: PropTypes.node,\n\n  /**\n   * Define an ID for this menu\n   */\n  id: PropTypes.string,\n\n  /**\n   * Internal: keeps track of the nesting level of the menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * Function called when the menu is closed\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify whether the Menu is currently open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Specify the size of the menu, from a list of available sizes.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n\n  /**\n   * Specify the x position where this menu is rendered\n   */\n  x: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\n\n  /**\n   * Specify the y position where this menu is rendered\n   */\n  y: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)])\n};\nexport default Menu;"]},"metadata":{},"sourceType":"module"}